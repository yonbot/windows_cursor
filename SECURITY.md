# 🔒 セキュリティポリシー

## 概要

このプロジェクトは、Cursor 初心者向け学習プロジェクトとして、セキュリティを最優先に設計されています。

## 🛡️ 実装済みセキュリティ対策

### 1. 依存関係のセキュリティ

- **npm audit**: 定期的な脆弱性チェック実施
- **信頼できるパッケージのみ使用**: OpenAI SDK、Anthropic SDK、Next.js 等
- **最新バージョンの維持**: セキュリティアップデートの迅速適用

### 2. 機密情報の保護

- **環境変数管理**: API キーは.env ファイルで管理
- **ハードコード禁止**: ソースコード内に機密情報を含まない
- **デモモード**: API キー無しでも安全に動作

### 3. 入力検証・サニタイゼーション

```typescript
// 厳格な入力検証を実装
if (!text || typeof text !== "string" || text.trim() === "") {
  return NextResponse.json(
    { success: false, error: "Text is required" },
    { status: 400 }
  );
}
```

### 4. セキュリティヘッダー

- **CSP (Content Security Policy)**: XSS 攻撃の防止
- **X-Frame-Options**: クリックジャッキング攻撃の防止
- **X-Content-Type-Options**: MIME タイプスニッフィング攻撃の防止

### 5. 危険コマンド対策（開発環境）

- **安全フック**: `rm -rf` 等の危険コマンドを自動検知・ブロック
- **gomi 統合**: 復元可能な安全削除コマンドを推奨
- **Claude Code 安全設定**: AI 生成コマンドの実行前チェック

## 🔍 セキュリティ監査結果

### 最新監査日時: 2025-01-28

#### 依存関係チェック

```bash
npm audit --audit-level moderate
# 結果: found 0 vulnerabilities ✅
```

#### 機密情報スキャン

- API キーのハードコード: **検出なし** ✅
- パスワード/トークン: **検出なし** ✅
- 機密ファイルの除外: **適切に設定** ✅

#### コードセキュリティ

- 入力検証: **適切に実装** ✅
- エラーハンドリング: **適切に実装** ✅
- XSS 対策: **CSP ヘッダーで保護** ✅

## 🚨 脆弱性報告

セキュリティ上の問題を発見した場合は、以下の方法で報告してください：

1. **GitHub Issues**: 一般的な問題
2. **直接連絡**: 重大な脆弱性の場合

## 📋 開発者向けセキュリティガイドライン

### 必須チェック項目

- [ ] `npm audit` でゼロ脆弱性を確認
- [ ] 環境変数に機密情報を適切に格納
- [ ] 入力検証を全ての API エンドポイントに実装
- [ ] エラーメッセージで機密情報を漏洩させない
- [ ] 危険コマンド実行前の安全確認

### 推奨事項

- 定期的な依存関係アップデート
- セキュリティヘッダーの適切な設定
- ログ出力での機密情報除外
- 最小権限の原則に従った設計

## 🔄 継続的セキュリティ

このプロジェクトは以下の継続的セキュリティ対策を実施しています：

1. **自動化された安全チェック**: Git hooks による危険操作の防止
2. **定期的な監査**: 依存関係とコードの定期チェック
3. **教育的配慮**: 初心者向けの安全な学習環境の提供

---

最終更新: 2025-01-28 16:30:00 JST
